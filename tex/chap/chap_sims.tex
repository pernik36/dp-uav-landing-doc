\chapter{Simulátory bezpilotních letadel}
    Simulace umožňuje zjednodušit vývoj nových algoritmů tím, že zvyšuje bezpečnost, snižuje režii a umožňuje rychlejší iteraci úprav a testování. V případě zkoumání vnějších vlivů na systém, jehož je algoritmus součástí, má umělé prostředí výhodu v tom, že jeho parametry jsou pod kontrolou vývojáře, který tak může systém testovat v širší škále podmínek a ověřit a zhodnotit tak jeho funkčnost i za podmínek (nebo jejich kombinace), které jsou v realitě v daném místě málo obvyklé. Rizikem je možná nepřesnost simulace, která způsobí odlišné chování systému při reálném nasazení, z toho důvodu je obvyklé simulační výsledky na konci vývoje validovat, jestli odpovídají realitě.

    Právě z důvodu minimalizace potřebných úprav a co nejsnazšího přenosu systému do reality je vhodné pro vývoj zvolit takový simulátor, který umožňuje propojení se skutečným letovým řídicím softwarem v řídicí jednotce letounu, jenž může být také simulovaný. V dokumentaci některých letových softwarů se simulaci přímo věnuje nějaká kapitola a nabízí různé podporované simulátory, které je možné spolu s nimi spustit (\cite{px4:simulation}; \cite{ardupilot:simulation}; \cite{betaflight:simulation}).

    Mezi rozšířené řídicí softwary patří ArduPilot, Betaflight a PX4. Všechny podporují běh v simulovaném prostředí a spolupracují s vybranými simulátory. ArduPilot a PX4 se mimo jiné svou funkcionalitou zaměřují i na provádění autonomních mísí, zatímco Betaflight je určen spíše pro lety s pohledem z první osoby například během závodění, kde je vyždována velmi rychlá a přesná odezva na vstupy a poruchy. S různými zaměřeními souvisí i podporované způsoby ovládání, kdy ArduPilot a PX4 je možné řídit vzdáleně pomocí protokolu MAVLink i rádiově modelářským ovladačem, zatímco Betaflight přes MAVLink umí pouze vysílat telemetrii a s jiným než rádiovým ovládáním se příliš nepočítá. Podporované simulátory se mezi říicími softwary částečně překrývají, jejich přehled je uveden v \refskl{tab:sims}{tabulce}, zdrojem dat je oficiální dokumentace příslušného kontroléru (\cite{px4:simulation}; \cite{ardupilot:simulation}; \cite{betaflight:simulation}).

    \begin{table}
        \centering
        \input{tab/tab_sims}
        \caption[Simulátory podporované kontrolérem letounu]{Přehled podpory často používaných simulátorů vybranými letovými řídicími souftwary.}
        \label{tab:sims}
    \end{table}

    Funkcemi se v \refskl{tab:sims}{tabulce} uvedené simulátory mohou výrazně lišit a pro další použití v této práci je třeba vybrat takový, ve kterém bude možné provozovat navádění na plošinu a to nejlépe na základě obrazu a simulovat různé vlivy prostředí. V následujících podkapitolách (\cref{sec:gazebo,sec:realflight,sec:jmavsim,sec:flightgear,sec:jsbsim,sec:airsim}) jsou zevrubně popsány hlavní funkce jednotlivých simulátorů. Porovnání funkcí důležitých pro tuto práci je uvedené v \refskl{tab:simsfeatures}{tabulce}.

    \section{Gazebo} \label{sec:gazebo}
    Gazebo je simulátor vyvíjený nadací Open Source Robotics Foundation. Je výchozím simulátorem v Robot Operating System, díky čemuž se těší velké oblibě při 3D simulacích dynamiky robotů. Má velmi aktivní komunitu. Umožňuje využití různých fyzikálních enginů, modelů senzorů a podporuje snadné vytváření 3D světů. Díky tomu lze snadno testovat návrhy robotů a algoritmů nebo i trénovat systémy strojového učení pomocí realistických scénářů. Gazebo používá modulární architekturu s oddělenými knihovnami pro simulaci fyziky, vykreslování, uživatelské rozhraní, komunikaci a generování dat senzorů. Podporované UAV zahrnují čtyřrotorové letouny (Iris a Solo), šestirotorové letouny (Typhoon H480), různé konvertoplány (např. letadla s plochou dráhou letu a svislým startem a přistáním), běžná letadla nebo pozemní vozítka. I když je Gazebo bohatou platformou, vykreslovací techniky nejsou tak pokročilé jako například v Unreal Engine nebo Unity, které využívají jiné simulátory. (\cite{Ebeid2018})
    
    Co se týče simulace vnějších vlivů, Gazebo nativně umožňuje měnit podmínky osvětlení, simulaci větru je možné provést pomocí doplňku distribuovaného společně s Gazebem a v definici modelu je možné upravit, jak bude vítr působit na model, teplotu a vlhkost společně s jejich senzory je možné také simulovat pluginem, ale působení na model není implementované.